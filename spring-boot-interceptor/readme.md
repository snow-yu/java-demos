# 拦截器配置与使用

**拦截器定义**

拦截器，指请求接口被访问之前，进行拦截然后在之前或之后加入的操作。拦截是AOP的一种实现策略。拦截器主要用来按照指定的规则拒绝请求

**拦截器应用**
```
token令牌验证
请求数据校验
用户权限校验
放行指定接口
```

**多个拦截器执行顺序**
拦截器的执行顺序是按照拦截器的注册顺序执行的

1. 预处理阶段
- 先执行所有注册的拦截器的**preHandle()** 方法
- 按照拦截器在Spring MVC配置中声明或注册的顺序进行执行。
- 如果任何一个拦截器的 preHandle() 方法返回 false，则后续的拦截器链会被中断，后续的 preHandle() 方法将不会被执行，并且当前请求会立即结束，控制器方法也不会执行。

2. 后处理阶段
- 当控制器方法成功执行并返回ModelAndView之后，将会按照与预处理相反的顺序来执行各个拦截器的 **postHandle()** 方法。

3. 完成处理阶段
- 在视图渲染完成后，Spring MVC 会最后调用每个拦截器的 afterCompletion() 方法。
- 这个阶段同样遵循与预处理相反的顺序，即先添加到拦截器链中的拦截器的 afterCompletion() 方法最后执行。


